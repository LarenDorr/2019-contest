(function(t){function e(e){for(var i,a,r=e[0],c=e[1],u=e[2],f=0,h=[];f<r.length;f++)a=r[f],s[a]&&h.push(s[a][0]),s[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(h.length)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},s={app:0},o=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("64a9"),s=n.n(i);s.a},"0b4b":function(t,e,n){"use strict";var i=n("255c"),s=n.n(i);s.a},"17b2":function(t,e,n){"use strict";var i=n("2af4"),s=n.n(i);s.a},"1d05":function(t,e,n){},"255c":function(t,e,n){},"2af4":function(t,e,n){},4862:function(t,e,n){"use strict";var i=n("1d05"),s=n.n(i);s.a},"4e77":function(t,e,n){},"540e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Title"),n("Window"),n("GameControl")],1)},o=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("h2",[t._v(t._s(t.title))])])},r=[],c={name:"Title",data:function(){return{title:"👉Push Emoji👈"}}},u=c,l=(n("0b4b"),n("2877")),f=Object(l["a"])(u,a,r,!1,null,null,null),h=f.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"window"},[n("GameBoard",{class:{active:t.isGaming},attrs:{mapData:t.map,isGaming:t.isGaming},on:{status:t.handleStatus,result:t.handleResult}}),n("GameStatus",{attrs:{status:t.status}}),t.isGaming?t._e():n("LevelSelects",{on:{selects:t.handleSelects}}),t.message.type?n("Message",{attrs:{type:t.message.type,content:t.message.content}}):t._e()],1)},d=[],m=new i["a"],v={up:"UP",down:"DOWN",left:"LEFT",right:"RIGHT",return:"RETURN",reload:"RELOAD",confirm:"CONFIRM",cancel:"CANCEL",question:"QUESTION"},y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"selects"},[n("Select",{attrs:{title:t.currentSelectValue.title,options:t.currentSelectValue.options,operation:t.operation},on:{select:t.handleSelect}})],1)},g=[],b=(n("7f7f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"select"},[n("p",{staticClass:"select-title"},[t._v(t._s(t.title))]),n("div",{staticClass:"select-options"},t._l(t.texts,function(e,i){return n("p",{key:i},[t._v(t._s(e))])}),0)])}),_=[],S=n("a4bb"),x=n.n(S),C=(n("6762"),n("2fdb"),n("bd86")),O={name:"Select",props:{title:{type:String,required:!0},options:{type:Array,required:!0},operation:{type:Object,required:!0}},data:function(){return{nowValue:0}},computed:{values:function(){return this.options.map(function(t){return t.value})},texts:function(){var t=this;return this.options.map(function(e,n){return n===t.nowValue?"👉"+e.text:e.text})}},watch:{operation:function(t){var e,n=this;t=t.value;var i=(e={},Object(C["a"])(e,v.up,function(){0!==n.nowValue?n.nowValue--:n.nowValue=n.options.length-1}),Object(C["a"])(e,v.down,function(){n.nowValue!==n.options.length-1?n.nowValue++:n.nowValue=0}),Object(C["a"])(e,v.confirm,function(){n.$emit("select",n.nowValue),n.nowValue=0}),e);x()(i).includes(t)&&i[t]()}}},I=O,k=(n("17b2"),Object(l["a"])(I,b,_,!1,null,null,null)),j=k.exports,w={name:"LevelSelects",data:function(){return{selects:[{name:"diffcult",value:{title:"选择难度",options:[{text:"简单",value:"easy"},{text:"中等",value:"medium"},{text:"较难",value:"hard"}]}},{name:"level",value:{title:"选择关卡",options:[{text:"1",value:0},{text:"2",value:1},{text:"3",value:2}]}}],data:{},currentSelect:0,operation:{value:"none"}}},computed:{currentSelectValue:function(){return this.selects[this.currentSelect].value}},mounted:function(){this.registerKey()},methods:{registerKey:function(){var t=this;m.$on("control",function(e){t.operation={value:e}})},handleSelect:function(t){var e=this.selects[this.currentSelect].name,n=this.selects[this.currentSelect].value.options[t].value;this.$set(this.data,e,n),this.currentSelect!==this.selects.length-1?this.currentSelect++:(this.$emit("selects",this.data),this.currentSelect=0)}},components:{Select:j}},E=w,$=(n("7eac"),Object(l["a"])(E,y,g,!1,null,null,null)),M=$.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game-board"},[n("table",{staticClass:"board-table"},t._l(t.staticItems,function(e,i){return n("tr",{key:i},t._l(e,function(t,e){return n("Item",{key:i+"-"+e,staticClass:"cell",attrs:{type:t,position:i+"-"+e}})}),1)}),0),t._l(t.boxsAndPerson,function(e){return n("Item",{key:e.id,staticClass:"cell dynamic",style:t.getCSSFromPosi(e.position),attrs:{type:e.type}})})],2)},T=[],P=n("cebc"),D=n("768b"),V=(n("6b54"),n("ac6a"),{0:{value:"",canMove:!1,canThrough:!0},1:{value:"🚧",canMove:!1,canThrough:!1},2:{value:"📦",canMove:!0,canThrough:!1},3:{value:"🔵",canMove:!1,canThrough:!0},4:{value:"🔴",canMove:!1,canThrough:!0},5:{value:"🧑",canMove:!0,canThrough:!1}}),A={forEach:function(t,e){t.forEach(function(t,n){t.forEach(function(t,i){e(t,[n,i])})})},map:function(t,e){return t.map(function(t,n){return t.map(function(t,i){return e(t,[n,i])})})},getAround:function(t,e){var n=t[0].length,i=t.length,s=Object(D["a"])(e,2),o=s[0],a=s[1],r=[];return r.push([o-1,a]),r.push([o,a+1]),r.push([o+1,a]),r.push([o,a-1]),r=r.filter(function(t){return t[0]>=0&&t[0]<n&&t[1]>=0&&t[1]<i}),r=r.map(function(e){return{position:e,value:t[e[0]][e[1]]}}),r}},F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("td",[t._v(t._s(t._f("emojiIt")(t.type)))])},L=[],R=(n("c5f6"),{name:"Item",props:{type:{type:Number,required:!0},position:{type:String}},filters:{emojiIt:function(t){return V[t]["value"]}}}),q=R,B=Object(l["a"])(q,F,L,!1,null,null,null),z=B.exports,N={name:"GameBoard",props:{mapData:{type:Array},isGaming:{type:Boolean}},data:function(){return{staticItems:[[]],dynamicItems:[[]],history:[],lastPositions:[]}},mounted:function(){this.registerControl(),this.initData(),this.checkStatus()},watch:{mapData:function(){this.initData(),this.checkStatus(),this.history=[]}},computed:{person:function(){var t;return A.forEach(this.dynamicItems,function(e,n){5===e.type&&(t=n)}),t?{position:t,type:5}:{}},boxs:function(){var t=[];return A.forEach(this.dynamicItems,function(e,n){if(2===e.type){var i=e.type,s=e.id,o=e.canMove;t.push({position:n,type:i,id:s,canMove:o})}}),t},boxsAndPerson:function(){return x()(this.person).length?this.boxs.concat(this.person):this.boxs},places:function(){var t=[];return A.forEach(this.staticItems,function(e,n){4===e&&t.push(n)}),t},isSuccess:function(){var t=this.boxs.map(function(t){return t.position.toString()});return this.places.every(function(e){return e=e.toString(),t.includes(e)})},isFailed:function(){return this.boxs.every(function(t){return!t.canMove})}},methods:{willGameContinue:function(){this.checkStatus(),this.isSuccess?this.$emit("result",!0):this.isFailed&&this.$emit("result",!1)},go:function(t,e){var n=t,i=this.calcPosi(n,e),s=this.dynamicItems[i[0]][i[1]];if(this.canMove(i))return this.moveItem(n,i),this.checkBoxs(),!0;if(2===s.type){if(!s.canMove)return!1;var o=this.go(i,e);if(o)return this.moveItem(n,i),this.checkBoxs(),!0}return!1},goPerson:function(t){var e=this.go(this.person.position,t);e&&(this.record(),this.willGameContinue())},moveItem:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];n&&this.lastPositions.push({from:t,to:e});var i=Object(D["a"])(t,2),s=i[0],o=i[1],a=Object(D["a"])(e,2),r=a[0],c=a[1],u=this.dynamicItems[s][o];this.$set(this.dynamicItems[r],c,u),this.$set(this.dynamicItems[s],o,0)},calcPosi:function(t,e){return"up"===e?[t[0]-1,t[1]]:"down"===e?[t[0]+1,t[1]]:"left"===e?[t[0],t[1]-1]:"right"===e?[t[0],t[1]+1]:void 0},canMove:function(t){var e=Object(D["a"])(t,2),n=e[0],i=e[1],s=this.dynamicItems[n][i],o=s.type||s;return 2!==o&&(o=this.staticItems[n][i],!!V[o].canThrough)},record:function(){this.history.push(this.lastPositions),this.lastPositions=[]},undo:function(){var t=this;if(this.history.length){var e=this.history.pop().reverse();e.forEach(function(e){t.moveItem(e.to,e.from,!1)}),this.checkBoxs(),this.checkStatus()}},checkStatus:function(){var t=this,e=this.boxs.map(function(t){return t.position}),n=0;this.places.forEach(function(t){e.forEach(function(e){t.toString()===e.toString()&&n++})}),this.$nextTick(function(){t.$emit("status",{steps:t.history.length,done:[n,e.length]})})},checkBoxs:function(){var t=this,e=[];this.boxs.forEach(function(n){var i=A.getAround(t.staticItems,n.position);i.forEach(function(t){V[t.value].canThrough?e.push(0):e.push(1)}),i=A.getAround(t.dynamicItems,n.position),i.forEach(function(t,n){t=t.value,t&&!t.canMove&&(e[n]=1)});var s=e.reduce(function(t,e){return t+e});if(s>=3)t.freezeItem(n.position);else if(2===s){var o=1===e[0]&&1===e[2];o=o||1===e[1]&&1===e[3],o?t.unFreezeItem(n.position):t.freezeItem(n.position)}else t.unFreezeItem(n.position);e=[]})},freezeItem:function(t){var e=Object(D["a"])(t,2),n=e[0],i=e[1];this.$set(this.dynamicItems[n],i,Object(P["a"])({},this.dynamicItems[n][i],{canMove:!1}))},unFreezeItem:function(t){var e=Object(D["a"])(t,2),n=e[0],i=e[1];this.$set(this.dynamicItems[n],i,Object(P["a"])({},this.dynamicItems[n][i],{canMove:!0}))},refresh:function(){this.initData(),this.history=[],this.checkStatus()},getCSSFromPosi:function(t){if(t)return{top:"".concat(40*t[0]+10,"px"),left:"".concat(40*t[1]+10,"px")}},registerControl:function(){var t,e=this,n=["UP","DOWN","LEFT","RIGHT"],i=this,s=(t={},Object(C["a"])(t,v.return,function(){i.undo()}),Object(C["a"])(t,v.reload,function(){i.refresh()}),Object(C["a"])(t,v.cancel,function(){}),t);m.$on("control",function(t){e.isGaming&&(n.includes(t)?i.goPerson(t.toLocaleLowerCase()):s[t]())})},initData:function(){this.staticItems=A.map(this.mapData,function(t){return V[t].canMove?0:t});var t=0;this.dynamicItems=A.map(this.mapData,function(e){return V[e].canMove?{type:e,id:t++,canMove:!0}:0})}},components:{Item:z}},W=N,K=(n("6e33"),Object(l["a"])(W,G,T,!1,null,null,null)),U=K.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"status"},[n("span",{staticClass:"statu"},[t._v("👟: "+t._s(t.status.steps))]),n("span",{staticClass:"statu"},[t._v("🏁: "+t._s(t.status.done[0])+"/"+t._s(t.status.done[1]))])])},J=[],Q={name:"GameStatus",props:{status:{type:Object,required:!0}}},Z=Q,X=(n("4862"),Object(l["a"])(Z,H,J,!1,null,null,null)),Y=X.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message",class:t.borderStyle},[n("p",[t._v(t._s(t.content))])])},et=[],nt={name:"Message",props:{type:{type:String,required:!1},content:{type:String,required:!0}},computed:{borderStyle:function(){return{success:"success"===this.type,failed:"failed"===this.type}}}},it=nt,st=(n("c6b3"),Object(l["a"])(it,tt,et,!1,null,null,null)),ot=st.exports,at={easy:[[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,5,2,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,0,1,0,1,0,1,1],[1,1,0,1,0,1,0,1],[1,1,1,1,1,1,1,1]],[[1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,1],[1,0,0,0,0,2,5,1],[1,0,0,1,1,1,1,1],[1,0,0,0,0,0,4,1],[1,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1],[1,1,0,0,0,0,0,0]],[[1,1,1,1,1,1,1,1],[1,5,0,1,0,0,0,1],[1,0,2,0,0,0,0,1],[1,1,0,0,1,1,1,1],[1,0,0,0,0,0,4,1],[1,0,0,1,0,0,0,1],[1,0,0,1,0,0,0,1],[1,1,1,1,1,1,1,1]]],medium:[[[0,1,1,1,1,1,1,0],[0,1,5,0,0,0,1,0],[1,1,0,0,0,0,1,1],[1,4,0,1,1,0,4,1],[1,0,0,2,2,0,0,1],[1,0,0,0,0,0,0,1],[1,1,0,0,0,0,1,1],[0,1,1,1,1,1,1,0]],[[0,0,1,1,1,1,1,0],[1,1,1,0,0,1,1,1],[1,0,0,0,0,0,4,1],[1,0,2,1,1,1,0,1],[1,0,2,0,0,0,0,1],[1,5,0,0,0,0,0,1],[1,0,0,4,1,1,1,1],[1,1,1,1,1,0,0,0]],[[0,0,0,0,0,1,1,1],[0,1,1,1,0,1,4,1],[1,1,5,1,1,1,0,1],[1,0,0,0,0,0,0,1],[1,0,0,0,2,2,0,1],[1,0,1,0,0,0,1,1],[1,4,1,0,0,0,1,0],[1,1,1,1,1,1,1,0]]],hard:[[[0,0,0,0,1,1,1,1],[1,1,1,1,1,4,0,1],[1,0,4,5,2,0,0,1],[1,1,1,0,2,0,1,1],[1,0,0,0,2,0,0,1],[1,1,1,0,0,0,4,1],[1,0,0,0,1,1,1,1],[1,1,1,1,1,0,0,0]],[[1,1,1,1,1,1,1,1],[1,0,0,0,1,4,0,1],[1,0,4,5,2,0,0,1],[1,1,1,0,2,0,1,1],[1,0,0,0,2,0,0,1],[1,0,0,1,0,0,4,1],[1,0,0,0,1,0,0,1],[1,1,1,1,1,1,1,1]],[[0,0,0,1,1,1,1,0],[1,1,1,0,0,0,1,1],[1,4,0,0,0,0,4,1],[1,0,0,2,1,0,4,1],[1,1,0,2,1,0,1,1],[0,1,0,2,0,0,1,1],[0,1,0,0,1,0,5,1],[0,1,1,1,1,1,1,1]]]},rt={name:"Window",data:function(){return{map:[[1,0,0,0,0,0,0,1],[0,1,0,0,0,0,1,0],[0,0,1,0,0,1,0,0],[0,0,0,1,1,0,0,0],[0,0,0,1,1,0,0,0],[0,0,1,0,0,1,0,0],[0,1,0,0,0,0,1,0],[1,0,0,0,0,0,0,1]],status:{steps:0,done:[0,0]},isGaming:!1,message:{type:"",content:""}}},mounted:function(){var t=this;m.$on("control",function(e){e===v.cancel&&t.reSelect()})},methods:{handleStatus:function(t){this.status=t},handleSelects:function(t){var e=t.diffcult,n=t.level,i=at[e][n];this.map=i,this.isGaming=!0},handleResult:function(t){var e=this;t?(this.message.type="success",this.message.content="Win"):(this.message.type="failed",this.message.content="Game Over"),setTimeout(function(){e.clearMessage()},2e3)},clearMessage:function(){this.message.type="",this.message.content=""},reSelect:function(){this.isGaming=!1}},components:{GameBoard:U,GameStatus:Y,LevelSelects:M,Message:ot}},ct=rt,ut=(n("f5a2"),Object(l["a"])(ct,p,d,!1,null,null,null)),lt=ut.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control"},[t.isMobile?n("div",{staticClass:"mobile-control"},[n("table",{staticClass:"keys"},[n("tr",[n("td"),n("td",{on:{click:function(e){return t.handleClick("up")}}},[t._v("⬆️")]),n("td")]),n("tr",[n("td",{on:{click:function(e){return t.handleClick("left")}}},[t._v("⬅️")]),n("td"),n("td",{on:{click:function(e){return t.handleClick("right")}}},[t._v("➡️")])]),n("tr",[n("td"),n("td",{on:{click:function(e){return t.handleClick("down")}}},[t._v("⬇️")]),n("td")])]),n("table",{staticClass:"keys"},[n("tr",[n("td",{on:{click:function(e){return t.handleClick("confirm")}}},[t._v("✔️")]),n("td"),n("td",{on:{click:function(e){return t.handleClick("reload")}}},[t._v("🔄")])]),t._m(0),n("tr",[n("td",{on:{click:function(e){return t.handleClick("return")}}},[t._v("↩️")]),n("td"),n("td",{on:{click:function(e){return t.handleClick("cancel")}}},[t._v("❌")])])])]):n("div",{staticClass:"pc-control"},[n("p",[t._v("W A S D 进行移动/选择")]),n("p",[t._v("Space 确认选择")]),n("p",[t._v("Esc 返回菜单")]),n("p",[t._v("Z 撤销操作")]),n("p",[t._v("R 重新载入")])])])},ht=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td"),n("td"),n("td")])}],pt={name:"GameControl",data:function(){return{isMobile:/Mobile/i.test(navigator.userAgent)}},mounted:function(){this.registerKey()},methods:{handleClick:function(t){m.$emit("control",v[t])},registerKey:function(){var t=document.body.addEventListener,e={w:v.up,a:v.left,s:v.down,d:v.right};t("keyup",function(t){var n=t.key;x()(e).includes(n)&&m.$emit("control",e[n]),"z"===n&&m.$emit("control",v.return),"r"===n&&m.$emit("control",v.reload)," "===n&&m.$emit("control",v.confirm),"Escape"===n&&m.$emit("control",v.cancel)})}}},dt=pt,mt=(n("688f"),Object(l["a"])(dt,ft,ht,!1,null,null,null)),vt=mt.exports,yt={name:"app",components:{Title:h,Window:lt,GameControl:vt}},gt=yt,bt=(n("034f"),Object(l["a"])(gt,s,o,!1,null,null,null)),_t=bt.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(_t)}}).$mount("#app")},"64a9":function(t,e,n){},"688f":function(t,e,n){"use strict";var i=n("6dc9"),s=n.n(i);s.a},"6dc9":function(t,e,n){},"6e33":function(t,e,n){"use strict";var i=n("4e77"),s=n.n(i);s.a},"7eac":function(t,e,n){"use strict";var i=n("d900"),s=n.n(i);s.a},"857f":function(t,e,n){},c6b3:function(t,e,n){"use strict";var i=n("540e"),s=n.n(i);s.a},d900:function(t,e,n){},f5a2:function(t,e,n){"use strict";var i=n("857f"),s=n.n(i);s.a}});
//# sourceMappingURL=app.6cc35ba4.js.map